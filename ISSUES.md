# HmCustomLivePreview プロジェクトの問題点

このドキュメントは、`HmCustomLivePreview` プロジェクトの現状分析と、それに伴う潜在的な問題点をまとめたものです。

---

## 1. ビルド環境に関する問題点

### 概要
プロジェクトのビルドが、現在では古くなった特定の開発環境（Visual Studio 2017）に強く依存しています。

### 詳細
- **古いIDEへの依存**: `README.md` では Visual Studio 2017 の利用が推奨されています。新しいバージョンのVisual Studioでは、プロジェクトの互換性の問題や、ビルドエラーが発生する可能性があります。
- **開発環境構築のハードル**: 新しい開発者がプロジェクトに参加する際、古いIDEを別途インストールする必要があり、環境構築のハードルが高くなっています。
- **プラットフォームの限定**: 開発環境がWindowsおよびVisual Studioに限定されており、他のOS（macOS, Linux）での開発は考慮されていません。

---

## 2. 依存関係の管理に関する問題点

### 概要
特にJavaScriptライブラリの管理方法に問題があり、手動でのファイルコピー（ベンダー依存）が行われています。

### 詳細
- **手動でのライブラリ管理**: `sample`フォルダに含まれる`HmCustomLivePreviewMD.js`は、Markdownパーサーである`marked.js`ライブラリそのものです。このようにライブラリのソースコードを直接プロジェクトに含める方法は、バージョン管理を困難にします。
- **非常に古いライブラリバージョン**: 内包されている`marked.js`は2014年頃のバージョン（v0.3.2）であり、多くのセキュリティ脆弱性が存在する可能性があります。また、最新版で追加された機能やパフォーマンス改善の恩恵を受けることができません。
- **更新の困難さ**: ライブラリを更新するには、手動で新しいバージョンのファイルをダウンロードし、置き換える必要があります。これは手間がかかり、エラーの原因にもなります。`npm`や`yarn`のようなパッケージマネージャを使用することで、このプロセスを自動化できます。

---

## 3. 保守性に関する問題点

### 概要
プロジェクトが複数のプログラミング言語（C++, C#, JavaScript）で構成されており、全体のアーキテクチャが複雑になっています。

### 詳細
- **技術スタックの複雑性**: 秀丸エディタ本体との連携部分（C++）、スクリプトエンジンのホスティング（C#）、変換ロジック（JavaScript）と、役割ごとに言語が分かれています。このため、修正や機能追加を行う際に、複数の言語とそれらの連携に関する知識が必要となり、メンテナンスのコストが高くなっています。
- **デバッグの困難さ**: C++とC#、C#とJavaScriptといった言語間のデータ受け渡し部分で問題が発生した場合、原因の特定が難しくなる傾向があります。

---

## 4. ドキュメントに関する問題点

### 概要
開発者向けのドキュメントが不足しており、プロジェクトの全体像やビルド方法を把握するのが困難です。

### 詳細
- **ビルド手順の不足**: `README.md`には基本的なビルド方法しか書かれておらず、ビルドに関する詳細な注意点を記すための`VS2017.md`ファイルは空の状態です。これにより、ビルド時に問題が発生した場合の解決が難しくなっています。
- **カスタマイズ方法が不明確**: `sample`のJavaScriptファイルがライブラリ全体を含んでいるため、ユーザーが「どこを」「どのように」カスタマイズすれば良いのかが直感的に分かりにくくなっています。よりシンプルで、カスタマイズ箇所を明示したサンプルが望まれます。
